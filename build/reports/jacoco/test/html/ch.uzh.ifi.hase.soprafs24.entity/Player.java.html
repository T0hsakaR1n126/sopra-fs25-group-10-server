<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Player.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sopra-fs25-group-10-server</a> &gt; <a href="index.source.html" class="el_package">ch.uzh.ifi.hase.soprafs24.entity</a> &gt; <span class="el_source">Player.java</span></div><h1>Player.java</h1><pre class="source lang-java linenums">package ch.uzh.ifi.hase.soprafs24.entity;

import ch.uzh.ifi.hase.soprafs24.constant.GameMode;
import ch.uzh.ifi.hase.soprafs24.constant.GameRoleType;
import ch.uzh.ifi.hase.soprafs24.constant.PlayerStatus;

import javax.persistence.*;
import java.io.Serializable;

@Entity
@Table(name = &quot;PLAYER&quot;)
public class Player implements Serializable {
    
    private static final long serialVersionUID = 1L;
    
    @Id
    @GeneratedValue
    private Long playerId;

    @Column(nullable = false, unique = true)
    private String token;

    @ManyToOne
    @JoinColumn(name = &quot;userId&quot;, nullable = true)  // nullable for guests
    private User user;
    
    @ManyToOne
    @JoinColumn(name = &quot;gameId&quot;, nullable = false)
    private Game game;
    
<span class="pc" id="L31">    @Enumerated(EnumType.STRING)</span>
    @Column(nullable = false)
    private PlayerStatus playerStatus = PlayerStatus.WAITING;
    
<span class="pc" id="L35">    @Column(nullable = false)</span>
<span class="pc" id="L36">    private Integer score = 0;</span>
    
<span class="pc" id="L38">    @Column(nullable = false)</span>
    private boolean isGuest = false;
    
<span class="pc" id="L41">    @Enumerated(EnumType.STRING)</span>
    @Column(nullable = false)
    private GameRoleType role = GameRoleType.PLAYER;
    
    @ManyToOne
    @JoinColumn(name = &quot;teamId&quot;, nullable = true)
    private Team team;
    
    @Column(nullable = true, unique = true)
    private String playerName;

    @Column(nullable = true)
    private Long totalQuestions;

    @Column(nullable = true)
    private Long correctQuestions;

    @Column(nullable = true)
    private Integer triesLeft;

    public Integer getTriesLeft() {
<span class="nc" id="L62">        return triesLeft;</span>
    }

    public void setTriesLeft(Integer triesLeft) {
<span class="nc" id="L66">        this.triesLeft = triesLeft;</span>
<span class="nc" id="L67">    }</span>

    public String getToken() {
<span class="fc" id="L70">        return token;</span>
    }

    public void setToken(String token) {
<span class="fc" id="L74">        this.token = token;</span>
<span class="fc" id="L75">    }</span>
    public Long getCorrectQuestions() {
<span class="nc" id="L77">        return correctQuestions;</span>
    }

    public void setCorrectQuestions(Long correctQuestions){
<span class="nc" id="L81">        this.correctQuestions = correctQuestions;</span>
<span class="nc" id="L82">    }</span>

    @Column(nullable = true)
    private Long questionId;

    @Column(nullable = true)
    private Long skippedQuestions;
    
    @Column(nullable = true)
    private Integer currentHint;

    public Long getSkippedQuestions() {
<span class="nc" id="L94">        return skippedQuestions;</span>
    }

    public void setSkippedQuestions(Long skippedQuestions) {
<span class="nc" id="L98">        this.skippedQuestions = skippedQuestions;</span>
<span class="nc" id="L99">    }</span>

    public Integer getCurrentHint() {
<span class="nc" id="L102">        return currentHint;</span>
    }

    public void setCurrentHint(Integer currentHint) {
<span class="nc" id="L106">        this.currentHint = currentHint;</span>
<span class="nc" id="L107">    }</span>

    public Long getQuestionId() {
<span class="nc" id="L110">        return questionId;</span>
    }

    public void setQuestionId(Long questionId) {
<span class="nc" id="L114">        this.questionId = questionId;</span>
<span class="nc" id="L115">    }</span>

    public String getPlayerName() {
<span class="fc" id="L118">        return playerName;</span>
    }
    
    public void setPlayerName(String playerName) {
<span class="nc" id="L122">        this.playerName = playerName;</span>
<span class="nc" id="L123">    }</span>
    
<span class="pc" id="L125">    @Column(nullable = false)</span>
    private GameMode modeType = GameMode.SOLO;
    
    @Column(nullable = false)
    private Integer totalHints;
    
    @Column(nullable = true)
    private Integer hintsLeft;

<span class="fc" id="L134">    public Player() {</span>
        // Default constructor
<span class="fc" id="L136">    }</span>
    
<span class="nc" id="L138">    public Player(User user, Game game) {</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (user != null) {</span>
<span class="nc" id="L140">            this.user = user;</span>
<span class="nc" id="L141">            this.isGuest = false;</span>
        } else {
<span class="nc" id="L143">            this.isGuest = true;</span>
<span class="nc" id="L144">            this.user = null;</span>
<span class="nc" id="L145">            this.setRole(GameRoleType.GUEST);</span>
        }
        
<span class="nc" id="L148">        this.game = game;</span>
<span class="nc" id="L149">        this.modeType = game.getModeType(); // inherit game mode</span>
<span class="nc" id="L150">        this.totalHints = game.getMaxHints(); // from game settings</span>
<span class="nc" id="L151">    }</span>
    
    // Methods
    @PostPersist
    private void setPlayerNameAfterPersist() {
<span class="nc bnc" id="L156" title="All 2 branches missed.">        if (this.user != null) {</span>
<span class="nc" id="L157">            this.playerName = this.user.getUsername();</span>
        } else {
<span class="nc" id="L159">            this.playerName = &quot;Guest_&quot; + this.playerId;</span>
        }
<span class="nc" id="L161">    }</span>

    public Long getPlayerId() {
<span class="fc" id="L164">        return playerId;</span>
    }
    
    public void setPlayerId(Long playerId) {
<span class="fc" id="L168">        this.playerId = playerId;</span>
<span class="fc" id="L169">    }</span>
    
    public User getUser() {
<span class="fc" id="L172">        return user;</span>
    }
    
    public void setUser(User user) {
<span class="nc" id="L176">        this.user = user;</span>
<span class="nc" id="L177">    }</span>
    
    public Game getGame() {
<span class="fc" id="L180">        return game;</span>
    }
    
    public void setGame(Game game) {
<span class="nc" id="L184">        this.game = game;</span>
<span class="nc" id="L185">    }</span>
    
    public PlayerStatus getPlayerStatus() {
<span class="nc" id="L188">        return playerStatus;</span>
    }
    
    public void setPlayerStatus(PlayerStatus playerStatus) {
<span class="nc" id="L192">        this.playerStatus = playerStatus;</span>
<span class="nc" id="L193">    }</span>
    
    public Integer getScore() {
<span class="nc" id="L196">        return score;</span>
    }
    
    public void setScore(Integer score) {
<span class="nc" id="L200">        this.score = score;</span>
<span class="nc" id="L201">    }</span>
    
    public boolean isGuest() {
<span class="nc" id="L204">        return isGuest;</span>
    }
    
    public void addScore(Integer points) {
<span class="nc" id="L208">        this.score += points;</span>
<span class="nc" id="L209">    }</span>

    public void setGuest(boolean guest) {
<span class="nc" id="L212">        isGuest = guest;</span>
<span class="nc" id="L213">    }</span>
    
    public GameRoleType getRole() {
<span class="nc" id="L216">        return role;</span>
    }
    
    public void setRole(GameRoleType role) {
<span class="nc" id="L220">        this.role = role;</span>
<span class="nc" id="L221">    }</span>
    
    public Team getTeam() {
<span class="fc" id="L224">        return team;</span>
    }
    
    public void setTeam(Team team) {
<span class="nc" id="L228">        this.team = team;</span>
<span class="nc" id="L229">    }</span>
    
    public GameMode getModeType() {
<span class="nc" id="L232">        return modeType;</span>
    }
    
    public void setModeType(GameMode modeType) {
<span class="nc" id="L236">        this.modeType = modeType;</span>
<span class="nc" id="L237">    }</span>
    
    public Integer getTotalHints() {
<span class="nc" id="L240">        return totalHints;</span>
    }    
 
    public void useHint() {
<span class="nc bnc" id="L244" title="All 2 branches missed.">        if (hintsLeft &gt; 0) {</span>
<span class="nc" id="L245">            this.hintsLeft -= 1 ;</span>
        } else {
<span class="nc" id="L247">            throw new IllegalStateException(&quot;No more hints available&quot;);</span>
        }
<span class="nc" id="L249">    }</span>

    public void useTry() {
<span class="nc bnc" id="L252" title="All 2 branches missed.">        if (triesLeft &gt; 0) {</span>
<span class="nc" id="L253">            this.triesLeft -= 1 ;</span>
        } else {
<span class="nc" id="L255">            throw new IllegalStateException(&quot;No more Tries available&quot;);</span>
        }
<span class="nc" id="L257">    }</span>
    
    public Integer getHintsLeft() {
<span class="nc" id="L260">        return hintsLeft;</span>
    }

    public void setHintsLeft(Integer hintsLeft) {
<span class="nc" id="L264">        this.hintsLeft = hintsLeft;</span>
<span class="nc" id="L265">    }</span>

    public Long getTotalQuestions() {
<span class="nc" id="L268">        return totalQuestions;</span>
    }

    public void setTotalQuestions(Long totalQuestions) {
<span class="nc" id="L272">        this.totalQuestions = totalQuestions;</span>
<span class="nc" id="L273">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>